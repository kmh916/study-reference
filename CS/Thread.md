# Thread

### - [[10분 테코톡] 🌷 코다의 Process vs Thread](https://youtu.be/1grtWKqTn50)
<details>
<summary>내용 정리</summary>
<div markdown="1">

# Process & Thread
  ### 프로그램 vs 프로세스
  - 프로그램은 명령어와 데이터들의 집합이 정적으로 보조기억 장치(HDD,SSD 등)에 저장된 형태를 말한다.  
  - 프로그램이 실행되어 메모리에 적재(load)되어 동작할때 프로세스라고 부른다.   
  
  ### 프로세스의 구조
  프로세스가 메모리에 할당될때 프로세스는 다음과 같은 4가지 요소로 구성된다. 해당 4가지 요소를 통들어 프로세스라고 표현하기도 한다.
  - Code : 프로그램에 존재하는 명령어
  - Data : 전역변수, static 변수 , 프로그램 시작시 할당 프로그램 종료시 소멸
  - Heap : 동적 메모리 영역(개발자가 할당 및 관리) , 1 -> N 방향으로 메모리 할당 , 런타임에 크기 결정 
  - Stack : 지역변수 , 매개변수 , 함수 반환 값등 함수의 호출과 관계되는 변수 , 함수 호출시 할당 , LIFO 방식의 동작 , N-> 1 방향으로 메모리 할당
  
  ### 프로세스 제어 블록(PCB , Process Controler Block)
  PCB는 운영체제가 프로세스를 제어하기 위해 필요한 정보들을 저장하는 자료구조이다.
  
  #### PCB의 구조
  - 프로세스 식별자 (PID)
  - 프로세스 상태 : create, ready, running, waiting, terminated와 같은 프로세스 상태
  - 프로그램 카운터(PC) : 다음에 실행할 명령어의 주소
  - CPU 레지스터 : 실행중이던 Register Set 정보등을 저장
  - CPU 스케줄링 정보 : 우선순위, 최종 실행시각, CPU 점유시간등
  - 메모리 관리 정보 : 세그먼트 테이블(segment table), 페이지 테이블(page table), 메모리 보호 관련 정보(베이스, 경계, 한계 레지스터 관련 정보)
  - 프로세스 계정 정보 : 페이지 테이블 , 스케줄링 큐 포인터, 소유자 , 부모 등
  - 입출력 상태 정보 : 프로세스에 할당된 입출력 장치 목록, 열린 파일 목록 등
  
  ### 컨텍스트 스위칭 
  컨텍스트 스위칭은 멀티프로세스 환경에서 CPU가 특정 프로세스를 실행하고 있는 상태에서
  다른 프로세스가 실행되어야 할 때 기존의 프로세스의 상태와 Context(정보)들을 PCB에 저장하고
  실행할 프로세스의 PCB를 읽어들여 프로세스를 실행하는 작업을 말한다.
  
  
  
  
  
  ### Thread
  프로세스내에서 실제로 작업을 실행하는 주체를 스레드라고 한다. 모든 프로세스에는 한 개 이상의 스레드가 존재하여 작업을 수행하고
  두 개 이상의 스레드를 가지는 프로세스는 멀티스레드 프로세스 라고 한다. 
  
  #### 멀티 스레드의 장점
  - 사용자 응답성 향상 : 프로세스가 여러 스레드로 분할된 경우 일부 스레드의 처리가 지연되어도, 
  다른 스레드는 작업을 계속 처리가 가능합니다. ex) 채팅방을 생성하는 Post요청(이미지를 포함하고있음 )에서
  Data를 데이터베이스에 Insert하고 Id를 Response로 반환하는 로직(500ms)과 이미지를 외부 클라우드에 업로드하는 로직(4000ms)을 싱글 스레드로 구현하면 4000ms
  멀티스레드로  구현하였을때 응답속도가 500ms이였다.
  - 자원 효율 : 자원 공유를 위한 IPC(프로세스간의 자원공유 기법)같은 번거로운 작업이 필요 없다.
  
  
# 멀티 프로세스 vs 멀티 스레드
  하나의 어플리케이션에 대한 두 가지의 다른 처리방법 멀티 프로세스 vs 멀티 스레드
  하나의 프로그램이 여러개의 프로세스로 나뉘어 처리되면 멀티프로세스, 하나의 프로세스안에서 
  여러개의 스레드로 나뉘어 처리되면 멀티 스레드이다.
  
  ### 멀티 프로세스
  각 프로세스는 독립적이고 개별적으로 메모리를 차지하며 IPC를 통해 자원을 공유한다.
  Context Switching 비용이 비교적 크게 발생한다. 각 프로세스가 독립적이기 때문에 
  안전성이 높은 장점이 있다. 
  
  <details>
  <summary>ex ) Chrome</summary>
<div markdown="1">

  ### 온몸으로 멀티 프로세스라는걸 어필중인 크롬
  
  ![image](https://user-images.githubusercontent.com/94831670/183689082-d3dd4a2f-f328-4208-89d1-5905389bc5d7.png)
</div>
</details>
  
  
  ### 멀티 스레드
  프로세스를 생성하기 위한 시스템 콜이 줄어들고 스레드간 자원을 공유하기 때문에 
  효율적인 통신 및 작업 처리가 가능하다. 자원을 공유하기 때문에 동기화 문제가 발생하고
  하나의 스레드에 문제가 생기면 전체 프로세스에 영향을 끼친다.
<details>
<summary>이런 문제...</summary>
<div markdown="1">

  ### IE에서 하나의 스레드가 문제가 생기면 IE의 모든 탭이 먹통이 된다.
  
  ![image](https://user-images.githubusercontent.com/94831670/183689428-f9750c02-4832-434c-b040-c01b765261bc.png)
</div>
</details>

  

  

  
  
  
# Multi-core
멀티프로세스와 멀티스레드는 소프트웨어적, 멀티코어는 하드웨어적인 개념
  
  
</div>
</details>
